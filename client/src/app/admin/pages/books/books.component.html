<div class="btn-right">
  <p-button label="Kitap Ekle" size="small" (click)="toggleSidebar()" />
</div>

<p-sidebar
  [(visible)]="sidebarVisible"
  position="right"
  styleClass="w-30"
  appSidebar
>
  <app-book-feature [selectedBookId]="selectedBookId" />
</p-sidebar>

<div class="content">
  <p-table [value]="pagedBooks">
    <ng-template pTemplate="header">
      <tr>
        <th>Kitap ID</th>
        <th>Kitap Kapak Fotoğrafı</th>
        <th>Kitap İsmi</th>
        <th>Kitap Açıklaması</th>
        <th>Kitap Yayıncısı</th>
        <th>Kitap Yazarı</th>
        <th>Kitap Kategorisi</th>
        <th>Kitap Fiyatı</th>
        <th>Kitap Baskı Tarihi</th>
        <th>Kitap Sayfa Sayısı</th>
        <th>Kitap Kira Bilgisi</th>
        <th>İşlemler</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-book>
      <tr>
        <td>{{ book.id }}</td>
        <td>
          <div class="img">
            <img [src]="book.image" [alt]="book.title" />
          </div>
        </td>
        <td>
          {{ book.title }}
        </td>
        <td>
          <p [innerHTML]="book.description.slice(0, 70) + '...'"></p>
        </td>
        <td>{{ book.publisher }}</td>
        <td>{{ book.author }}</td>
        <td>{{ getCategoryName(book.categoryId) }}</td>
        <td>{{ book.price }}</td>
        <td>{{ book.publishDate | date : "MMMM, dd, y" : null : "tr" }}</td>
        <td>{{ book.pageNumber }}</td>
        <td>
          <p>{{ book.isRented ? "Kiralandı" : "Kiralık" }}</p>
          <p>
            {{ book.isRented ? getUserName(book.rentedFrom) : "" }}
          </p>
        </td>
        <td>
          <div class="edit">
            <p-button
              (click)="toggleSidebar(book.id)"
              label="Düzenle"
              severity="warning"
              size="small"
            />
            <p-button
              (click)="deleteBook(book.id)"
              label="Sil"
              severity="danger"
              size="small"
            />
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-paginator
  [rows]="rows"
  [totalRecords]="books.length"
  [rowsPerPageOptions]="rowSize"
  (onPageChange)="onPageChange($event)"
/>
<p-toast />
<p-confirmDialog />
